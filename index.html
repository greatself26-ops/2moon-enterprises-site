<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2 Moon Enterprises | Fundraiser</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #0d0d0d;
      color: #f5f5f5;
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    header {
      text-align: center;
      padding: 2rem 1rem 1rem;
    }
    .logo {
      display: block;
      margin: 0 auto 1rem;
      max-width: 220px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(255,165,0,0.4);
    }
    h1 {
      font-size: 1.8rem;
      margin-bottom: 0.4rem;
      color: #fbbf24;
    }
    .tagline { font-size: 1.1rem; color: #ddd; margin-bottom: 2rem; }
    section { padding: 1.5rem 1rem; max-width: 800px; margin: auto; }
    h2 {
      color: #fbbf24;
      border-left: 5px solid #f97316;
      padding-left: 10px;
    }
    .progress-container {
      background: #1a1a1a;
      padding: 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 2px 20px rgba(255,165,0,0.15);
      text-align: center;
      margin-bottom: 2rem;
    }
    .progress-bar-bg {
      width: 100%;
      height: 30px;
      background: #333;
      border-radius: 30px;
      overflow: hidden;
      margin-top: 10px;
    }
    .progress-bar-fill {
      height: 30px;
      width: 0%;
      background: linear-gradient(120deg,#fbbf24,#f97316,#ffae00,#f97316,#fbbf24);
      background-size: 300% 100%;
      border-radius: 30px;
      transition: width 1s ease-in-out;
      animation: flow 3s linear infinite;
      box-shadow: 0 0 20px rgba(255,174,0,0.4);
    }
    @keyframes flow {
      0% { background-position: 0% 50%; }
      100% { background-position: 300% 50%; }
    }
    .upi-section {
      background: #1a1a1a;
      border-radius: 1rem;
      padding: 1.5rem;
      box-shadow: 0 2px 20px rgba(255,165,0,0.1);
      text-align: center;
    }
    .upi-section h3 { color: #fbbf24; }
    footer {
      text-align: center;
      padding: 2rem 1rem;
      font-size: 0.9rem;
      background: #111;
      color: #aaa;
    }
    a.button, button.button {
      display: inline-block;
      background: linear-gradient(90deg,#fbbf24,#f97316);
      color: #fff;
      padding: 0.8rem 1.2rem;
      border-radius: 50px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      text-decoration: none;
      margin-top: 1rem;
      transition: 0.3s;
      box-shadow: 0 0 10px rgba(249,115,22,0.4);
    }
    a.button:hover, button.button:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 15px rgba(255,174,0,0.6);
    }
  </style>
</head>
<body>
  <header>
    <img src="logo-tagline.jpg" alt="2 Moon Enterprises Logo" class="logo" />
    <h1>2 Moon Enterprises</h1>
    <p class="tagline">We Focus on Growth</p>
  </header>

  <section class="progress-container">
    <h2>Your Trust, Our Progress</h2>
    <p>Every contribution brings us closer to our shared vision.</p>
    <div id="progress-text">Loading data...</div>
    <div class="progress-bar-bg"><div id="progress-bar" class="progress-bar-fill"></div></div>
    <div id="progress-percent" style="margin-top:8px;font-weight:600;"></div>
    <div id="last-updated" style="font-size:0.85rem;color:#888;margin-top:4px;"></div>
  </section>

  <section>
    <h2>About Our Mission</h2>
    <p>2 Moon Enterprises is dedicated to building sustainable ventures that bring value to individuals and communities alike.
       Our goal is to raise ‚Çπ1 Crore to expand our core services and create meaningful opportunities.</p>
  </section>

  <section>
    <h2>Our Services</h2>
    <ul>
      <li>üöó Car Wash at Your Doorstep</li>
      <li>üåæ Agri Trade Solutions</li>
      <li>üéì Career Support & Mentoring</li>
      <li>üíº Business Support & Development</li>
    </ul>
  </section>

  <section>
    <h2>Promise of Transparency & Purpose</h2>
    <p>At 2 Moon Enterprises, we are committed to honesty, growth, and community value.<br/>
       Every rupee raised will be used solely for business operations, service expansion, and sustainability initiatives.<br/>
       All donors and investors will receive periodic progress updates and transparent financial reporting.</p>
  </section>

  <!-- ‚úÖ Updated UPI / Investment Section -->
  <section class="upi-section">
    <h3>Invest with Us üí∞</h3>
    <p>Support our growth journey through a secure UPI contribution.</p>

    <img id="upi-qr" src="upi-qr.jpg" alt="UPI QR Code"
         style="max-width:220px;display:block;margin:16px auto;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.25);" />

    <div style="text-align:center;margin-top:10px;">
      <button id="payBtn" class="button" style="margin:0.5rem;">Invest with Us</button>
      <button id="copyUriBtn" class="button" style="background:#555;margin:0.5rem;">Copy UPI Link</button>
    </div>

    <p id="payHint" style="text-align:center;color:#aaa;margin-top:10px;">
      üì± On mobile: tap the button to open your UPI app. On desktop: scan the QR or copy the link below.
    </p>

    <p style="margin-top:1rem;">After payment, kindly fill out our donor form below.</p>
    <a class="button" href="https://forms.gle/FWNuNPA5nsxAv7Jb7" target="_blank">Submit Details on Google Form</a>
  </section>

  <footer>
    <p>üìç Neyveli T.S<br/>üìû Kabilan Natarajan ‚Äì Manager | 9789246419<br/>‚úâÔ∏è greatself26@gmail.com</p>
  </footer>

  <script>
    // ======== Progress Bar Logic ========
    const SHEET_URL =
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vQPCkqMgNLdROU4Fm2JYpAnF4w9dQKQ_FXbAnkNBMGf9vbxRGsisMdJvsJI_92JeBzW6kZOisNIAWzl/pub?output=csv";
    const FUNDING_GOAL = 10000000; // ‚Çπ1 Crore
    let displayedTotal = 0;

    async function fetchFundingData() {
      try {
        const res = await fetch(SHEET_URL, { mode: "cors", cache: "no-cache" });
        const txt = await res.text();
        const rows = txt.split(/\r?\n/).map(r => r.split(','));
        const header = rows[0].map(h => h.trim().replace(/\"/g, ""));
        const amountIndex = header.findIndex(h => h.toLowerCase().includes("amount supported"));
        let total = 0;
        for (let i = 1; i < rows.length; i++) {
          const val = parseFloat(rows[i][amountIndex]?.replace(/[^0-9.]/g, "")) || 0;
          total += val;
        }
        animateCount(total);
      } catch (err) {
        document.getElementById("progress-text").innerText =
          "Unable to load funding data.";
      }
    }

    function animateCount(target) {
      const duration = 1500;
      const start = displayedTotal;
      const startTime = performance.now();

      function update(now) {
        const progress = Math.min((now - startTime) / duration, 1);
        const value = start + (target - start) * progress;
        updateProgress(value);
        if (progress < 1) requestAnimationFrame(update);
        else displayedTotal = target;
      }
      requestAnimationFrame(update);
    }

    function updateProgress(total) {
      const percent = Math.min((total / FUNDING_GOAL) * 100, 100);
      const bar = document.getElementById("progress-bar");
      const text = document.getElementById("progress-text");
      const pct = document.getElementById("progress-percent");
      const updated = document.getElementById("last-updated");

      bar.style.width = percent.toFixed(2) + "%";
      text.innerText = `‚Çπ${Math.floor(total).toLocaleString("en-IN")} raised of ‚Çπ${FUNDING_GOAL.toLocaleString("en-IN")} goal`;
      pct.innerText = `${percent.toFixed(2)}% funded`;
      updated.innerText = "Last updated: " + new Date().toLocaleString();
    }

    fetchFundingData();
    setInterval(fetchFundingData, 60000);

    // ======== UPI Payment Logic ========
    const upiUri =
      'upi://pay?pa=202508PRT0IAtF9jhBnpstqrsbrp@cbin&pn=2%20Moon%20Enterprises&tn=Investment%20Contribution&cu=INR';

    function isMobile() {
      return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    }

    document.getElementById('payBtn').addEventListener('click', () => {
      if (isMobile()) {
        window.location.href = upiUri;
      } else {
        alert('Please scan the QR code with your UPI app or copy the link below.');
      }
    });

    document.getElementById('copyUriBtn').addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(upiUri);
        alert('‚úÖ UPI link copied to clipboard. Paste it into your UPI app to pay.');
      } catch (e) {
        prompt('Copy this UPI link:', upiUri);
      }
    });
  </script>
</body>
</html>
